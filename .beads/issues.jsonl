{"id":"tkgo-9th","title":"Audit Terrakube API coverage gaps in Go client","description":"Assess the full Terrakube API surface area against the current Go client library and identify which APIs are missing. The current client covers 22 resource services: Organizations, Workspaces, Modules, Teams, TeamTokens, Variables, OrganizationVariables, Templates, Tags, VCS, SSH, Agents, Collections, CollectionItems, CollectionReferences, WorkspaceTags, WorkspaceAccess, WorkspaceSchedules, Webhooks, WebhookEvents, History, and Jobs. This audit needs to discover all Terrakube REST API endpoints from their documentation/source code (https://github.com/AzBuilder/terrakube), catalog current coverage, and produce a gap analysis with priority recommendations for missing resources.","design":"Approach: (1) Pull Terrakube API controller/route definitions from AzBuilder/terrakube GitHub repo to enumerate all REST endpoints. (2) Cross-reference against the 22 services in client.go. (3) Categorize gaps by resource type (CRUD operations, relationships, special endpoints). (4) Prioritize based on Terraform provider usage patterns and common automation needs.","acceptance_criteria":"- [ ] Full list of Terrakube API endpoints documented (from Terrakube source/docs)\n- [ ] Current Go client coverage mapped against API surface\n- [ ] Gap analysis produced listing missing resources/endpoints\n- [ ] Each gap prioritized (P0-P4) based on typical client usage\n- [ ] Recommendations documented for implementation order\n- [ ] Results captured in a bead or linked document for future implementation tracking","notes":"Terrakube uses JSON:API spec. Source repo: https://github.com/AzBuilder/terrakube. The Go client uses google/jsonapi for serialization. Some endpoints (like TeamToken) use raw JSON instead of JSON:API format - watch for similar patterns in undiscovered endpoints.","status":"closed","priority":2,"issue_type":"feature","owner":"dwebb@thig.com","created_at":"2026-02-11T08:46:54.109928-06:00","created_by":"dwebb","updated_at":"2026-02-11T09:42:28.579976-06:00","closed_at":"2026-02-11T09:42:28.579976-06:00","close_reason":"Killed by Dennis","labels":["groomed"]}
{"id":"tkgo-lhn","title":"terrakube-go v2: generics refactor + feature completeness","description":"Rewrite terrakube-go using Go generics for the CRUD base layer, update all models to full field coverage from OpenAPI spec v2.27.0, and add 8 missing resource services. Target: 30 JSON:API resources + TeamToken custom endpoint.","status":"open","priority":1,"issue_type":"epic","owner":"dwebb@thig.com","created_at":"2026-02-11T09:28:17.938335-06:00","created_by":"dwebb","updated_at":"2026-02-11T09:28:17.938335-06:00"}
{"id":"tkgo-lhn.1","title":"Implement generic CRUD base (crud.go)","description":"Create crud.go with a generic crudService[T any] struct embedding *Client. Methods: list(), get(), create(), update(), del(). Handles JSON:API marshaling, filter params (filter[resourceType]), ID validation, error handling. This is the foundation everything else builds on. Must support ListOptions with filter param keyed by resource type name.","status":"closed","priority":1,"issue_type":"task","owner":"dwebb@thig.com","created_at":"2026-02-11T09:28:27.309992-06:00","created_by":"dwebb","updated_at":"2026-02-11T10:08:00.4888-06:00","closed_at":"2026-02-11T10:08:00.4888-06:00","close_reason":"crud.go implemented, build/lint/test pass","dependencies":[{"issue_id":"tkgo-lhn.1","depends_on_id":"tkgo-lhn","type":"parent-child","created_at":"2026-02-11T09:28:27.310485-06:00","created_by":"dwebb"}]}
{"id":"tkgo-lhn.10","title":"Add Implementation service + model","description":"New resource. JSON:API type: implementation. Nested: /organization/{orgId}/provider/{providerId}/version/{versionId}/implementation. Fields: os, arch, filename, downloadUrl, shasumsUrl, shasumsSignatureUrl, shasum, keyId, asciiArmor, trustSignature, source, sourceUrl. Relation: version. Full CRUD. Also accessible flat at /implementation/{id}.","status":"in_progress","priority":2,"issue_type":"task","owner":"dwebb@thig.com","created_at":"2026-02-11T09:29:39.940839-06:00","created_by":"dwebb","updated_at":"2026-02-11T10:11:10.595282-06:00","dependencies":[{"issue_id":"tkgo-lhn.10","depends_on_id":"tkgo-lhn","type":"parent-child","created_at":"2026-02-11T09:29:39.941314-06:00","created_by":"dwebb"},{"issue_id":"tkgo-lhn.10","depends_on_id":"tkgo-lhn.2","type":"blocks","created_at":"2026-02-11T09:30:05.573329-06:00","created_by":"dwebb"}]}
{"id":"tkgo-lhn.11","title":"Add ModuleVersion service + model","description":"New resource. JSON:API type: module_version. Nested: /organization/{orgId}/module/{moduleId}/version. Fields: version, commit. Relation: module. Full CRUD.","status":"in_progress","priority":2,"issue_type":"task","owner":"dwebb@thig.com","created_at":"2026-02-11T09:29:40.03379-06:00","created_by":"dwebb","updated_at":"2026-02-11T10:11:10.677249-06:00","dependencies":[{"issue_id":"tkgo-lhn.11","depends_on_id":"tkgo-lhn","type":"parent-child","created_at":"2026-02-11T09:29:40.034293-06:00","created_by":"dwebb"},{"issue_id":"tkgo-lhn.11","depends_on_id":"tkgo-lhn.2","type":"blocks","created_at":"2026-02-11T09:30:05.657395-06:00","created_by":"dwebb"}]}
{"id":"tkgo-lhn.12","title":"Add GithubAppToken service + model","description":"New resource. JSON:API type: github_app_token. Flat endpoint: /github_app_token. Fields: appId, installationId, owner, token (secret) + audit fields. Full CRUD. Top-level resource, no parent ID.","status":"in_progress","priority":2,"issue_type":"task","owner":"dwebb@thig.com","created_at":"2026-02-11T09:29:40.127815-06:00","created_by":"dwebb","updated_at":"2026-02-11T10:11:10.75914-06:00","dependencies":[{"issue_id":"tkgo-lhn.12","depends_on_id":"tkgo-lhn","type":"parent-child","created_at":"2026-02-11T09:29:40.128278-06:00","created_by":"dwebb"},{"issue_id":"tkgo-lhn.12","depends_on_id":"tkgo-lhn.2","type":"blocks","created_at":"2026-02-11T09:30:05.739254-06:00","created_by":"dwebb"}]}
{"id":"tkgo-lhn.13","title":"Add Address service + model","description":"New resource. JSON:API type: address. Nested under job. Fields: name, type (enum: AddressType) + audit fields. Relation: job. Also accessible via flat /address/{id}. Represents Terraform managed resource addresses in job output.","status":"in_progress","priority":2,"issue_type":"task","owner":"dwebb@thig.com","created_at":"2026-02-11T09:29:40.220402-06:00","created_by":"dwebb","updated_at":"2026-02-11T10:11:10.8561-06:00","dependencies":[{"issue_id":"tkgo-lhn.13","depends_on_id":"tkgo-lhn","type":"parent-child","created_at":"2026-02-11T09:29:40.220877-06:00","created_by":"dwebb"},{"issue_id":"tkgo-lhn.13","depends_on_id":"tkgo-lhn.2","type":"blocks","created_at":"2026-02-11T09:30:05.833176-06:00","created_by":"dwebb"}]}
{"id":"tkgo-lhn.14","title":"Update tests for all refactored and new services","description":"Ensure all 30 resource services + TeamToken have passing tests. Update existing tests to work with refactored generics-based services. Add tests for 8 new resources. Verify CI passes (go test, golangci-lint).","status":"open","priority":2,"issue_type":"task","owner":"dwebb@thig.com","created_at":"2026-02-11T09:29:51.238761-06:00","created_by":"dwebb","updated_at":"2026-02-11T09:29:51.238761-06:00","dependencies":[{"issue_id":"tkgo-lhn.14","depends_on_id":"tkgo-lhn","type":"parent-child","created_at":"2026-02-11T09:29:51.239345-06:00","created_by":"dwebb"},{"issue_id":"tkgo-lhn.14","depends_on_id":"tkgo-lhn.4","type":"blocks","created_at":"2026-02-11T09:30:05.916085-06:00","created_by":"dwebb"},{"issue_id":"tkgo-lhn.14","depends_on_id":"tkgo-lhn.5","type":"blocks","created_at":"2026-02-11T09:30:06.019771-06:00","created_by":"dwebb"},{"issue_id":"tkgo-lhn.14","depends_on_id":"tkgo-lhn.6","type":"blocks","created_at":"2026-02-11T09:30:06.114692-06:00","created_by":"dwebb"},{"issue_id":"tkgo-lhn.14","depends_on_id":"tkgo-lhn.7","type":"blocks","created_at":"2026-02-11T09:30:06.192618-06:00","created_by":"dwebb"},{"issue_id":"tkgo-lhn.14","depends_on_id":"tkgo-lhn.8","type":"blocks","created_at":"2026-02-11T09:30:06.287359-06:00","created_by":"dwebb"},{"issue_id":"tkgo-lhn.14","depends_on_id":"tkgo-lhn.9","type":"blocks","created_at":"2026-02-11T09:30:06.381192-06:00","created_by":"dwebb"},{"issue_id":"tkgo-lhn.14","depends_on_id":"tkgo-lhn.10","type":"blocks","created_at":"2026-02-11T09:30:06.474747-06:00","created_by":"dwebb"},{"issue_id":"tkgo-lhn.14","depends_on_id":"tkgo-lhn.11","type":"blocks","created_at":"2026-02-11T09:30:06.584681-06:00","created_by":"dwebb"},{"issue_id":"tkgo-lhn.14","depends_on_id":"tkgo-lhn.12","type":"blocks","created_at":"2026-02-11T09:30:06.665461-06:00","created_by":"dwebb"},{"issue_id":"tkgo-lhn.14","depends_on_id":"tkgo-lhn.13","type":"blocks","created_at":"2026-02-11T09:30:06.759623-06:00","created_by":"dwebb"}]}
{"id":"tkgo-lhn.15","title":"Update CI and documentation for v2","description":"Update README, ensure CI workflow passes with all new code. Verify golangci-lint clean. Update go.mod if needed. Tag as v2 or appropriate semver bump since the internal architecture changed (public API should remain compatible).","status":"open","priority":3,"issue_type":"task","owner":"dwebb@thig.com","created_at":"2026-02-11T09:29:51.351804-06:00","created_by":"dwebb","updated_at":"2026-02-11T09:29:51.351804-06:00","dependencies":[{"issue_id":"tkgo-lhn.15","depends_on_id":"tkgo-lhn","type":"parent-child","created_at":"2026-02-11T09:29:51.352348-06:00","created_by":"dwebb"},{"issue_id":"tkgo-lhn.15","depends_on_id":"tkgo-lhn.14","type":"blocks","created_at":"2026-02-11T09:30:06.865137-06:00","created_by":"dwebb"}]}
{"id":"tkgo-lhn.2","title":"Refactor OrganizationService as generics proof-of-concept","description":"Refactor OrganizationService to embed crudService[Organization] and delegate CRUD to generic base. This validates the generics approach before touching all 20 other services. Existing tests must still pass.","status":"closed","priority":1,"issue_type":"task","owner":"dwebb@thig.com","created_at":"2026-02-11T09:28:51.261921-06:00","created_by":"dwebb","updated_at":"2026-02-11T10:11:04.104221-06:00","closed_at":"2026-02-11T10:11:04.104221-06:00","close_reason":"OrganizationService refactored to generics, all tests pass","dependencies":[{"issue_id":"tkgo-lhn.2","depends_on_id":"tkgo-lhn","type":"parent-child","created_at":"2026-02-11T09:28:51.262432-06:00","created_by":"dwebb"},{"issue_id":"tkgo-lhn.2","depends_on_id":"tkgo-lhn.1","type":"blocks","created_at":"2026-02-11T09:30:04.870471-06:00","created_by":"dwebb"}]}
{"id":"tkgo-lhn.3","title":"Write comprehensive tests for generic CRUD base","description":"Table-driven tests for crudService generic base: List (with/without filter), Get (valid/empty ID), Create, Update (valid/empty ID), Delete (valid/empty ID), HTTP error handling (4xx, 5xx). Use testutil mock server. These tests validate the core once so per-resource tests can be thin.","status":"in_progress","priority":1,"issue_type":"task","owner":"dwebb@thig.com","created_at":"2026-02-11T09:28:51.374766-06:00","created_by":"dwebb","updated_at":"2026-02-11T10:08:08.294005-06:00","dependencies":[{"issue_id":"tkgo-lhn.3","depends_on_id":"tkgo-lhn","type":"parent-child","created_at":"2026-02-11T09:28:51.375227-06:00","created_by":"dwebb"},{"issue_id":"tkgo-lhn.3","depends_on_id":"tkgo-lhn.1","type":"blocks","created_at":"2026-02-11T09:30:04.956007-06:00","created_by":"dwebb"}]}
{"id":"tkgo-lhn.4","title":"Refactor remaining 20 existing services to use generic CRUD base","description":"Refactor all existing services to embed crudService[T] and delegate to generic base. Services: Workspace, Module, Team, Variable, OrgVariable, Template, Tag, VCS, SSH, Agent, Collection, CollectionItem, CollectionReference, WorkspaceTag, WorkspaceAccess, WorkspaceSchedule, Webhook, WebhookEvent, History, Job. TeamToken stays custom (non-JSON:API). Each service becomes thin typed wrappers (~5-8 lines per method: validate IDs, build path, delegate). All existing tests must pass.","status":"in_progress","priority":2,"issue_type":"task","owner":"dwebb@thig.com","created_at":"2026-02-11T09:29:07.018509-06:00","created_by":"dwebb","updated_at":"2026-02-11T10:11:10.077737-06:00","dependencies":[{"issue_id":"tkgo-lhn.4","depends_on_id":"tkgo-lhn","type":"parent-child","created_at":"2026-02-11T09:29:07.019023-06:00","created_by":"dwebb"},{"issue_id":"tkgo-lhn.4","depends_on_id":"tkgo-lhn.2","type":"blocks","created_at":"2026-02-11T09:30:05.034827-06:00","created_by":"dwebb"}]}
{"id":"tkgo-lhn.5","title":"Update all existing model structs with complete fields from OpenAPI spec","description":"Update model structs to match server OpenAPI spec v2.27.0 field coverage. Key gaps:\n\n- Workspace: add locked, lockDescription, moduleSshKey, lastJobStatus, lastJobDate + audit fields + relations (agent, ssh, organization, etc.)\n- Job: add approvalTeam, comments, commitId, overrideBranch, planChanges, refresh, refreshOnly, tcl, templateReference, terraformPlan, via + audit fields + relations (step, workspace, organization, address)\n- Module: add downloadQuantity, latestVersion, registryPath + audit fields\n- History: add serial, md5, lineage + audit fields\n- Schedule: add description, enabled + audit fields  \n- VCS: add callback, accessToken, redirectUrl + audit fields\n- All other models: add createdBy, createdDate, updatedBy, updatedDate where supported by server\n\nUse OpenAPI spec at ../terrakube/openapi-spec/v2_27_0.yml as source of truth for field names.","status":"in_progress","priority":2,"issue_type":"task","owner":"dwebb@thig.com","created_at":"2026-02-11T09:29:19.993547-06:00","created_by":"dwebb","updated_at":"2026-02-11T10:11:10.177742-06:00","dependencies":[{"issue_id":"tkgo-lhn.5","depends_on_id":"tkgo-lhn","type":"parent-child","created_at":"2026-02-11T09:29:19.994104-06:00","created_by":"dwebb"},{"issue_id":"tkgo-lhn.5","depends_on_id":"tkgo-lhn.2","type":"blocks","created_at":"2026-02-11T09:30:05.124337-06:00","created_by":"dwebb"}]}
{"id":"tkgo-lhn.6","title":"Add Action service + model","description":"New resource. JSON:API type: action. Flat endpoint: /action, /action/{id}. Fields: action (string), active (bool), category, description, displayCriteria, label, name, type, version + audit fields. No parent ID needed (top-level resource). Full CRUD.","status":"in_progress","priority":2,"issue_type":"task","owner":"dwebb@thig.com","created_at":"2026-02-11T09:29:39.537141-06:00","created_by":"dwebb","updated_at":"2026-02-11T10:11:10.263002-06:00","dependencies":[{"issue_id":"tkgo-lhn.6","depends_on_id":"tkgo-lhn","type":"parent-child","created_at":"2026-02-11T09:29:39.537629-06:00","created_by":"dwebb"},{"issue_id":"tkgo-lhn.6","depends_on_id":"tkgo-lhn.2","type":"blocks","created_at":"2026-02-11T09:30:05.222956-06:00","created_by":"dwebb"}]}
{"id":"tkgo-lhn.7","title":"Add Step service + model","description":"New resource. JSON:API type: step. Nested under job. Endpoints via /organization/{orgId}/job/{jobId}/step. Fields: name, output, status, stepNumber. Relation: job. Also accessible via flat /step/{id} endpoint. CRUD operations.","status":"in_progress","priority":2,"issue_type":"task","owner":"dwebb@thig.com","created_at":"2026-02-11T09:29:39.630294-06:00","created_by":"dwebb","updated_at":"2026-02-11T10:11:10.350157-06:00","dependencies":[{"issue_id":"tkgo-lhn.7","depends_on_id":"tkgo-lhn","type":"parent-child","created_at":"2026-02-11T09:29:39.630786-06:00","created_by":"dwebb"},{"issue_id":"tkgo-lhn.7","depends_on_id":"tkgo-lhn.2","type":"blocks","created_at":"2026-02-11T09:30:05.303379-06:00","created_by":"dwebb"}]}
{"id":"tkgo-lhn.8","title":"Add Provider service + model","description":"New resource. JSON:API type: provider. Nested under organization: /organization/{orgId}/provider. Fields: name, description. Relations: organization, version (hasMany). Full CRUD.","status":"in_progress","priority":2,"issue_type":"task","owner":"dwebb@thig.com","created_at":"2026-02-11T09:29:39.743104-06:00","created_by":"dwebb","updated_at":"2026-02-11T10:11:10.447346-06:00","dependencies":[{"issue_id":"tkgo-lhn.8","depends_on_id":"tkgo-lhn","type":"parent-child","created_at":"2026-02-11T09:29:39.743625-06:00","created_by":"dwebb"},{"issue_id":"tkgo-lhn.8","depends_on_id":"tkgo-lhn.2","type":"blocks","created_at":"2026-02-11T09:30:05.393597-06:00","created_by":"dwebb"}]}
{"id":"tkgo-lhn.9","title":"Add ProviderVersion service + model","description":"New resource. JSON:API type: version (provider context). Nested: /organization/{orgId}/provider/{providerId}/version. Fields: versionNumber, protocols. Relations: provider, implementation (hasMany). Full CRUD.","status":"in_progress","priority":2,"issue_type":"task","owner":"dwebb@thig.com","created_at":"2026-02-11T09:29:39.843618-06:00","created_by":"dwebb","updated_at":"2026-02-11T10:11:10.517165-06:00","dependencies":[{"issue_id":"tkgo-lhn.9","depends_on_id":"tkgo-lhn","type":"parent-child","created_at":"2026-02-11T09:29:39.844113-06:00","created_by":"dwebb"},{"issue_id":"tkgo-lhn.9","depends_on_id":"tkgo-lhn.2","type":"blocks","created_at":"2026-02-11T09:30:05.489988-06:00","created_by":"dwebb"}]}
{"id":"tkgo-v35","title":"Fix revive lint: Module.Ssh field should be SSH","description":"module.go:17 has struct field Ssh which should be SSH per Go naming conventions. golangci-lint revive var-naming rule flags this.","status":"open","priority":3,"issue_type":"bug","owner":"dwebb@thig.com","created_at":"2026-02-11T10:11:11.379276-06:00","created_by":"dwebb","updated_at":"2026-02-11T10:11:11.379276-06:00"}
