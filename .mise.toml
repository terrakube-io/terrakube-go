[tools]
go = "1.24"
"go:github.com/golangci/golangci-lint/v2/cmd/golangci-lint" = "latest"

[tasks.test]
run = "go test -race -count=1 ./..."

[tasks.lint]
run = "golangci-lint run ./..."

[tasks.fmt]
run = "gofumpt -w ."

[tasks.vet]
run = "go vet ./..."

[tasks.coverage]
run = "go test -race -coverprofile=coverage.out ./... && go tool cover -func=coverage.out"

[tasks.check]
depends = ["vet", "lint", "test"]
